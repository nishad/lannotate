{"version":3,"sources":["../src/commonjs.cts"],"sourcesContent":["import type {\n  persist as esmPersist,\n  restore as esmRestore,\n  persistToFile as esmPersistToFile,\n  restoreFromFile as esmRestoreFromFile\n} from './index.js'\n\nexport interface OramaPluginDataPersistenceExport {\n  persist: typeof esmPersist\n  restore: typeof esmRestore\n}\n\nexport type RequireCallback = (err: Error | undefined, orama?: OramaPluginDataPersistenceExport) => void\n\nlet _esmRestore: typeof esmRestore\nlet _esmPersist: typeof esmPersist\nlet _esmRestoreFromFile: typeof esmRestoreFromFile\nlet _esmPersistToFile: typeof esmPersistToFile\n\nexport async function persist(...args: Parameters<typeof esmPersist>): ReturnType<typeof esmPersist> {\n  if (!_esmPersist) {\n    const imported = await import('./index.js')\n    _esmPersist = imported.persist\n  }\n\n  return _esmPersist(...args)\n}\n\nexport async function restore(...args: Parameters<typeof esmRestore>): ReturnType<typeof esmRestore> {\n  if (!_esmRestore) {\n    const imported = await import('./index.js')\n    _esmRestore = imported.restore\n  }\n\n  return _esmRestore(...args)\n}\n\nexport function persistToFile(...args: Parameters<typeof esmPersistToFile>): ReturnType<typeof esmPersistToFile> {\n  if (!_esmPersistToFile) {\n    const imported = require('./index.js')\n    _esmPersistToFile = imported.persistToFile\n  }\n\n  return _esmPersistToFile(...args)\n}\n\nexport function restoreFromFile(...args: Parameters<typeof esmRestoreFromFile>): ReturnType<typeof esmRestoreFromFile> {\n  if (!_esmRestoreFromFile) {\n    const imported = require('./index.js')\n    _esmRestoreFromFile = imported.restoreFromFile\n  }\n  return _esmRestoreFromFile(...args)\n}\n\nexport function requireOramaPluginDataPersistence(callback: RequireCallback): void {\n  import('./index.js')\n    .then((loaded: OramaPluginDataPersistenceExport) => setTimeout(() => callback(undefined, loaded), 1))\n    .catch((error: Error) => setTimeout(() => callback(error), 1))\n}\n"],"names":["persist","restore","persistToFile","restoreFromFile","requireOramaPluginDataPersistence","_esmRestore","_esmPersist","_esmRestoreFromFile","_esmPersistToFile","args","imported","require","callback","then","loaded","setTimeout","undefined","catch","error"],"mappings":";;;;;;;;;;;IAmBsBA,OAAO,MAAPA;IASAC,OAAO,MAAPA;IASNC,aAAa,MAAbA;IASAC,eAAe,MAAfA;IAQAC,iCAAiC,MAAjCA;;AAxChB,IAAIC;AACJ,IAAIC;AACJ,IAAIC;AACJ,IAAIC;AAEG,eAAeR,QAAQ,GAAGS,IAAmC,EAAiC;IACnG,IAAI,CAACH,aAAa;QAChB,MAAMI,WAAW,MAAM,MAAM,CAAC;QAC9BJ,cAAcI,SAASV,OAAO;IAChC,CAAC;IAED,OAAOM,eAAeG;AACxB;AAEO,eAAeR,QAAQ,GAAGQ,IAAmC,EAAiC;IACnG,IAAI,CAACJ,aAAa;QAChB,MAAMK,WAAW,MAAM,MAAM,CAAC;QAC9BL,cAAcK,SAAST,OAAO;IAChC,CAAC;IAED,OAAOI,eAAeI;AACxB;AAEO,SAASP,cAAc,GAAGO,IAAyC,EAAuC;IAC/G,IAAI,CAACD,mBAAmB;QACtB,MAAME,WAAWC,QAAQ;QACzBH,oBAAoBE,SAASR,aAAa;IAC5C,CAAC;IAED,OAAOM,qBAAqBC;AAC9B;AAEO,SAASN,gBAAgB,GAAGM,IAA2C,EAAyC;IACrH,IAAI,CAACF,qBAAqB;QACxB,MAAMG,WAAWC,QAAQ;QACzBJ,sBAAsBG,SAASP,eAAe;IAChD,CAAC;IACD,OAAOI,uBAAuBE;AAChC;AAEO,SAASL,kCAAkCQ,QAAyB,EAAQ;IACjF,MAAM,CAAC,cACJC,IAAI,CAAC,CAACC,SAA6CC,WAAW,IAAMH,SAASI,WAAWF,SAAS,IACjGG,KAAK,CAAC,CAACC,QAAiBH,WAAW,IAAMH,SAASM,QAAQ;AAC/D"}